# HTTP
quarkus.http.port=8081

# Ollama
quarkus.langchain4j.ollama.base-url=http://localhost:11434/
quarkus.langchain4j.ollama.chat-model.model-id=gemma3:1b
quarkus.langchain4j.ollama.devservices.enabled=false
quarkus.langchain4j.ollama.embedding-model.enabled=true
quarkus.langchain4j.ollama.embedding-model.model-id=all-minilm:33m

#RAG
rag.location=src/main/resources/rag
rag.context=Vue.js
#quarkus.langchain4j.embedding-model.provider=dev.langchain4j.model.embedding.onnx.allminilml6v2.AllMiniLmL6V2EmbeddingModel
quarkus.langchain4j.embedding-model.provider=ollama

#Chroma
quarkus.langchain4j.chroma.collection-name=chatbot
quarkus.langchain4j.chroma.timeout=30000

# URLs serão configuradas automaticamente pelo Dev Services quando ativo
# Descomente as linhas abaixo apenas se quiser usar MySQL externo (sem Dev Services)
#quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/rag_db
#quarkus.datasource.reactive.url=mysql://localhost:3306/rag_db

# MySQL Dev Services (inicia automaticamente um container MySQL se Docker estiver disponível)
#MySQL
quarkus.datasource.db-kind=mysql
quarkus.datasource.devservices.port=3307
%test.quarkus.datasource.devservices.port=3308
# Hibernate não deve gerenciar o schema quando Flyway está ativo
# Flyway gerencia o schema através das migrations
quarkus.hibernate-orm.database.generation=none
# Desabilita validação do schema do Hibernate pós-boot (Flyway já valida)
# Isso evita o erro de NullPointerException com Hibernate Reactive
# Para Hibernate Reactive, também precisamos desabilitar a validação do schema
quarkus.hibernate-orm.schema-validation.none=true
quarkus.datasource.username=orion
quarkus.datasource.password=orion

# Flyway (migrations)
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
# Repara migrações falhas automaticamente em desenvolvimento
quarkus.flyway.repair-at-start=true

# Redis Configuration (for cache)
quarkus.redis.devservices.enabled=true

# Memory Management Configuration for Development
memory.default.max-messages=100
memory.ttl.hours=48

# JWT Configuration (apenas validação)
mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.verify.issuer=orion-users
# Permitir paths públicos apenas para recursos estáticos
# Endpoints protegidos usam @RolesAllowed("user")
quarkus.http.auth.permission.public.paths=/,/assets/*,/components/*,/services/*,/stores/*,/router/*
quarkus.http.auth.permission.public.policy=permit

# CORS
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:8081
quarkus.http.cors.headers=Authorization,Content-Type

# Orion Users URL
orion.users.url=http://localhost:8080
